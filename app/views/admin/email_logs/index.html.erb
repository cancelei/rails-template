<% provide(:page_title, "Email Logs") %>

<div>
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-foreground">Email Logs</h1>
    <p class="mt-1 text-sm text-muted-foreground"><%= @email_logs.total_count %> total emails</p>
  </div>

  <!-- Email Logs Table -->
  <%= render "shared/admin_table", columns: ["Subject", "Recipient", "Status", "Sent At"] do %>
    <tbody class="bg-card divide-y divide-border">
      <% @email_logs.each do |log| %>
        <tr>
          <td class="px-4 sm:px-6 py-4">
            <div class="text-sm font-medium text-foreground"><%= log.subject %></div>
            <div class="text-sm text-muted-foreground"><%= log.email_type %></div>
          </td>
          <td class="px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-muted-foreground">
            <%= log.recipient_email %>
          </td>
          <td class="px-4 sm:px-6 py-4 whitespace-nowrap">
            <% if log.sent_at.present? %>
              <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-success/20 text-success">
                Sent
              </span>
            <% else %>
              <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-warning/20 text-warning">
                Pending
              </span>
            <% end %>
          </td>
          <td class="px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-muted-foreground">
            <%= log.sent_at ? "#{time_ago_in_words(log.sent_at)} ago" : "Not sent" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  <% end %>

  <!-- Pagination -->
  <div class="mt-6">
    <%= paginate @email_logs %>
  </div>
</div>
