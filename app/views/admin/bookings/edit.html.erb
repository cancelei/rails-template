<%= turbo_frame_tag "modal" do %>
  <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
  <div class="fixed inset-0 z-10 overflow-y-auto">
    <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
      <div class="relative transform overflow-hidden rounded-lg bg-card px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6">
        <div class="mb-4">
          <h3 class="text-lg font-medium leading-6 text-gray-900">Edit Booking</h3>
          <p class="mt-1 text-sm text-gray-500">
            <%= @booking.tour.title %> - <%= @booking.user.name %>
          </p>
        </div>

        <%= form_with model: [:admin, @booking],
                      class: "space-y-6",
                      data: { turbo_frame: "_top" } do |f| %>

          <% if @booking.errors.any? %>
            <div class="rounded-md bg-danger/10 p-4 border border-danger/20">
              <div class="flex">
                <div class="ml-3">
                  <h3 class="text-sm font-medium text-danger">
                    <%= pluralize(@booking.errors.count, "error") %> prohibited this booking from being saved:
                  </h3>
                  <div class="mt-2 text-sm text-danger">
                    <ul class="list-disc pl-5 space-y-1">
                      <% @booking.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                      <% end %>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          <% end %>

          <%= render "shared/form_field",
                     form: f,
                     field: :status,
                     label: "Booking Status",
                     type: :select,
                     options_list: [%w[Pending pending], %w[Confirmed confirmed], %w[Completed completed], %w[Cancelled cancelled]],
                     required: true %>

          <%= render "shared/form_field",
                     form: f,
                     field: :notes,
                     label: "Notes",
                     type: :textarea,
                     placeholder: "Add any notes about this booking...",
                     rows: 4 %>

          <div class="flex justify-end space-x-3 pt-6 border-t border-border">
            <%= link_to "Cancel",
                        "#",
                        class: "inline-flex items-center px-4 py-2 border border-border shadow-sm text-sm font-medium rounded-md text-foreground bg-card hover:bg-muted",
                        data: { action: "click->modal#close" } %>
            <%= f.submit class: "inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary hover:bg-opacity-90" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
