<%# locals: (tour_add_on:, tour:) %>

<div id="<%= dom_id(tour_add_on) %>" class="card border-l-4 <%= tour_add_on.active? ? "border-l-primary" : "border-l-gray-300" %>">
  <div class="card-body">
    <div class="flex items-start justify-between gap-4">
      <%# Left: Add-on info %>
      <div class="flex-1">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-2xl"><%= tour_add_on.addon_type_icon %></span>
          <h3 class="text-lg font-semibold text-foreground">
            <%= tour_add_on.name %>
          </h3>
          <% unless tour_add_on.active? %>
            <span class="badge badge-muted text-xs">Inactive</span>
          <% end %>
        </div>

        <% if tour_add_on.description.present? %>
          <p class="text-sm text-muted-foreground mb-3"><%= tour_add_on.description %></p>
        <% end %>

        <div class="flex flex-wrap gap-3 text-sm">
          <div class="flex items-center gap-1">
            <span class="font-semibold text-foreground">Price:</span>
            <span class="text-primary font-semibold"><%= tour_add_on.formatted_price %></span>
          </div>

          <div class="flex items-center gap-1">
            <span class="font-semibold text-foreground">Type:</span>
            <span class="text-muted-foreground"><%= tour_add_on.addon_type.humanize %></span>
          </div>

          <% if tour_add_on.maximum_quantity %>
            <div class="flex items-center gap-1">
              <span class="font-semibold text-foreground">Max Quantity:</span>
              <span class="text-muted-foreground"><%= tour_add_on.maximum_quantity %></span>
            </div>
          <% end %>
        </div>
      </div>

      <%# Right: Actions %>
      <div class="flex items-center gap-2">
        <%= button_to "Edit",
                      edit_admin_tour_tour_add_on_path(tour, tour_add_on),
                      method: :get,
                      class: "btn-ghost btn-sm",
                      form: { data: { turbo_frame: dom_id(tour_add_on) } } %>

        <%= button_to "Delete",
                      admin_tour_tour_add_on_path(tour, tour_add_on),
                      method: :delete,
                      class: "btn-danger btn-sm",
                      form: { data: { turbo_confirm: "Are you sure you want to delete this add-on?" } } %>
      </div>
    </div>
  </div>
</div>
